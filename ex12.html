<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prac12-1</title>
    <script>
      function GetCookie(name) {
        let pairs = document.cookie.split(';');
        for (let i = 0; i < pairs.length; i++) {
          let pair = pairs[i].trim();
          let unit = pair.split('=');
          if (unit[0] == name) return unescape(unit[1]);
        }
        return null;
      }
      function SetCookie(name, value, expireDate) {
        let cookieStr =
          name +
          '=' +
          escape(value) +
          (expireDate == null ? '' : '; expires=' + expireDate.toGMTString());
        document.cookie = cookieStr;
      }
    </script>
  </head>
  <body>
    <script>
      let uName = GetCookie('username');
      let count = GetCookie('count');
      let expire = new Date();
      if (uName == null) {
        count = 0;
        uName = prompt('이름을 입력해 주십시오.', '');
        if (uName == null) {
          alert('이름을 입력하시면 보다 나은 서비스를 제공받을 수 있습니다.');
          uName = '아무개';
        } else {
          expire.setTime(expire.getTime() + 365 * 24 * 3600 * 1000);
          SetCookie('username', uName, expire);
        }
      }
      count++;
      expire.setTime(expire.getTime() + 365 * 24 * 3600 * 1000);
      SetCookie('count', count, expire);
      document.write(
        '<p>어서오십시오. ' +
          uName +
          '님의 ' +
          count +
          '번째 방문을 환영합니다!'
      );
    </script>
  </body>
</html>
